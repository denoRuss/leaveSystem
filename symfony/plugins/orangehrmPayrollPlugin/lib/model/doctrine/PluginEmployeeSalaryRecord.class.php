<?php

/**
 * PluginEmployeeSalaryRecord
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ##PACKAGE##
 * @subpackage ##SUBPACKAGE##
 * @author     ##NAME## <##EMAIL##>
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
abstract class PluginEmployeeSalaryRecord extends BaseEmployeeSalaryRecord
{
    protected $salaryComponentService;
    public function calculateMonthlyBasicTax($salary){

        $taxBracket = $this->getSalaryService()->getMatchingTaxBracket($salary);
        if ($taxBracket instanceof TaxBracket){
                $tax= $salary*$taxBracket->getPercentage()/100;
                return $tax;
            }

        return null;
    }

    public function getSalaryService() {
        if (!($this->salaryComponentService instanceof DkSalaryService)) {
            $this->salaryComponentService = new DkSalaryService();
        }
        return $this->salaryComponentService;
    }
}